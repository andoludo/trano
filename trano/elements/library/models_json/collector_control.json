{
    "components": [
        {
            "classes": [
                "CollectorControl"
            ],
            "component_template": {
                "bus": {
                    "real_inputs": [
                        {
                            "component": "conPum",
                            "name": "y_gain",
                            "port": "u_m",
                            "target": {
                                "main": "element.controllable_element.name"
                            }
                        },
                        {
                            "component": "mulMax",
                            "default": 25.0,
                            "multi": true,
                            "name": "yHea",
                            "port": "u",
                            "target": {
                                "main": "element.valves",
                                "sub": "name"
                            }
                        }
                    ],
                    "real_outputs": [
                        {
                            "component": "conPum",
                            "name": "y",
                            "port": "y",
                            "target": {
                                "main": "element.controllable_element.name"
                            }
                        },
                        {
                            "component": "mulMax",
                            "name": "yBoiCon",
                            "port": "y",
                            "target": {
                                "main": "element.controllable_element.name"
                            }
                        },
                        {
                            "component": "mulMax",
                            "name": "yPumBoi",
                            "port": "y",
                            "target": {
                                "main": "element.controllable_element.name"
                            }
                        }
                    ]
                },
                "category": "control",
                "template": "model CollectorControl{{ element.name | capitalize}}\nBuildings.Controls.OBC.CDL.Reals.PIDWithReset\nconPum({{ macros.render_parameters(parameters) | safe}}) \"Controller for pump\"\n{% raw %}annotation (Placement(transformation(extent={{54,-10},{74,10}})));{% endraw %}\nBuildings.Controls.OBC.CDL.Reals.MultiMax\nmulMax(nin={{ element.valves | length }})\n\"Maximum radiator valve position\"\n{% raw %}annotation (Placement(transformation(extent={{-76,-10},{-56,10}})));{% endraw %}\nBuildings.Controls.OBC.CDL.Reals.Hysteresis\nhysPum(uLow=0.01, uHigh=0.5)\n\"Hysteresis for pump\"\n{% raw %}annotation (Placement(transformation(extent={{-26,-10},{-6,10}})));{% endraw %}\nBuildings.Controls.OBC.CDL.Conversions.BooleanToReal booToRea\n\"Conversion from boolean to real signal\"\n{% raw %}annotation (Placement(transformation(extent={{14,-10},{34,10}})));{% endraw %}\n{{bus_template}}\nequation\nconnect(mulMax.y,hysPum. u) {% raw %}annotation (Line(\npoints={{-54,0},{-28,0}},\ncolor={0,0,127},\nsmooth=Smooth.None));{% endraw %}\nconnect(hysPum.y,conPum. trigger) {% raw %}annotation (Line(points={{-4,0},{4,0},{4,-18},\n{58,-18},{58,-12}},     color={255,0,255}));{% endraw %}\nconnect(hysPum.y,booToRea. u)\n{% raw %}annotation (Line(points={{-4,0},{12,0}},   color={255,0,255}));{% endraw %}\nconnect(booToRea.y,conPum. u_s)\n{% raw %}annotation (Line(points={{36,0},{52,0}},     color={0,0,127}));{% endraw %}\n{% raw %}annotation (Icon(coordinateSystem(preserveAspectRatio=false)), Diagram(\ncoordinateSystem(preserveAspectRatio=false)));{% endraw %}\n{{bus_ports | safe}}\nend CollectorControl{{ element.name | capitalize}};"
            },
            "figures": [],
            "library": "default",
            "parameter_processing": {
                "function": "default_parameters"
            },
            "ports": [
                {
                    "multi_connection": true,
                    "names": [
                        "dataBus"
                    ],
                    "targets": [
                        "DataBus",
                        "System"
                    ],
                    "use_counter": false,
                                                           "flow": "undirected",
                    "medium": "data"
                }
            ],
            "template": "\n    {{package_name}}.Trano.Controls.ventilation.CollectorControl{{ element.name | capitalize}}\n    {{ element.name }}",
            "variant": "default"
        }
    ]
}