modelbuildings_simple_hydronicpackageMedium=Buildings.Media.Air"Mediummodel";packageMediumW=Buildings.Media.Water"Mediummodel";parameterIntegernRoo=2"Numberofrooms";parameterModelica.Units.SI.VolumeVRoo=4*6*3"Volumeofoneroom";parameterModelica.Units.SI.PowerQ_flow_nominal=2200"Nominalpowerofheatingplant";//Duetothenightsetback,inwhichtheradiatordonotprovideheatinputintotheroom,//wescalethedesignpoweroftheradiatorloopparameterRealscaFacRad=1.5"Scalingfactortoscalethepower(andmassflowrate)oftheradiatorloop";parameterModelica.Units.SI.TemperatureTSup_nominal=273.15+50+5"Nominalsupplytemperatureforradiators";parameterModelica.Units.SI.TemperatureTRet_nominal=273.15+40+5"Nominalreturntemperatureforradiators";parameterModelica.Units.SI.TemperaturedTRad_nominal=TSup_nominal-TRet_nominal"Nominaltemperaturedifferenceforradiatorloop";parameterModelica.Units.SI.TemperaturedTBoi_nominal=20"Nominaltemperaturedifferenceforboilerloop";parameterModelica.Units.SI.MassFlowRatemRad_flow_nominal=scaFacRad*Q_flow_nominal/dTRad_nominal/4200"Nominalmassflowrateofradiatorloop";parameterModelica.Units.SI.MassFlowRatemBoi_flow_nominal=scaFacRad*Q_flow_nominal/dTBoi_nominal/4200"Nominalmassflowrateofboilerloop";parameterModelica.Units.SI.PressureDifferencedpPip_nominal=10000"Pressuredifferenceofpipe(withoutvalve)";parameterModelica.Units.SI.PressureDifferencedpVal_nominal=6000"Pressuredifferenceofvalve";parameterModelica.Units.SI.PressureDifferencedpRoo_nominal=6000"Pressuredifferenceofflowlegthatservesaroom";parameterModelica.Units.SI.PressureDifferencedpThrWayVal_nominal=6000"Pressuredifferenceofthree-wayvalve";parameterModelica.Units.SI.PressureDifferencedp_nominal=dpPip_nominal+dpVal_nominal+dpRoo_nominal+dpThrWayVal_nominal"Pressuredifferenceofloop";parameterBuildings.HeatTransfer.Data.GlazingSystems.Genericdouble_glazing(finalglass={Buildings.HeatTransfer.Data.Glasses.Generic(x=0.003,k=1.0,tauSol={0.646},rhoSol_a={0.062},rhoSol_b={0.063},tauIR=0.0,absIR_a=0.84,absIR_b=0.84),Buildings.HeatTransfer.Data.Glasses.Generic(x=0.003,k=1.0,tauSol={0.646},rhoSol_a={0.062},rhoSol_b={0.063},tauIR=0.0,absIR_a=0.84,absIR_b=0.84)},finalgas={Buildings.HeatTransfer.Data.Gases.Air(x=0.0127)},UFra=1.4);parameterBuildings.HeatTransfer.Data.OpaqueConstructions.Genericexternal_wall(finalnLay=3,absIR_a=0.9,absIR_b=0.9,absSol_a=0.6,absSol_b=0.6,material={Buildings.HeatTransfer.Data.Solids.Generic(x=0.2,k=1.4,c=840.0,d=2240.0),Buildings.HeatTransfer.Data.Solids.Generic(x=0.02,k=0.03,c=1200.0,d=40.0),Buildings.HeatTransfer.Data.Solids.Generic(x=0.1,k=0.12,c=1210.0,d=540.0)},roughness_a=Buildings.HeatTransfer.Types.SurfaceRoughness.Rough);Buildings.ThermalZones.Detailed.MixedAirspace_1(redeclarepackageMedium=Medium,AFlo=50,hRoo=2,nConExt=4,datConExt(layers={external_wall,external_wall,external_wall,external_wall},A={10.0,10.0,10.0,10.0},til={Buildings.Types.Tilt.Wall,Buildings.Types.Tilt.Wall,Buildings.Types.Tilt.Wall,Buildings.Types.Tilt.Wall},azi={135.0,0.0,45.0,90.0}),nSurBou=0,nConBou=1,datConBou(layers={external_wall},A={10.0},til={Buildings.Types.Tilt.Floor},azi={90.0}),nConExtWin=1,datConExtWin(layers={external_wall},A={10.0},til={Buildings.Types.Tilt.Wall},glaSys={double_glazing},wWin={1.0},hWin={1.0}),nConPar=0,energyDynamics=Modelica.Fluid.Types.Dynamics.FixedInitial);Buildings.Fluid.HeatExchangers.Radiators.RadiatorEN442_2emission(redeclarepackageMedium=MediumW,Q_flow_nominal=scaFacRad*Q_flow_nominal/nRoo,energyDynamics=Modelica.Fluid.Types.Dynamics.FixedInitial,T_a_nominal=323.15,T_b_nominal=313.15)"Radiator";Buildings.Fluid.Actuators.Valves.TwoWayEqualPercentagevalve(redeclarepackageMedium=MediumW,dpValve_nominal(displayUnit="Pa")=dpVal_nominal,m_flow_nominal=mRad_flow_nominal/nRoo,dpFixed_nominal=dpRoo_nominal,from_dp=true,use_inputFilter=false)"Radiatorvalve";Neosim.Controls.SpaceControls.PIDspace_control(setPoint=295.15,yMax=1,yMin=0);Buildings.BoundaryConditions.WeatherData.ReaderTMY3weather(filNam=Modelica.Utilities.Files.loadResource("modelica://Buildings/Resources/weatherdata/USA_IL_Chicago-OHare.Intl.AP.725300_TMY3.mos"));Neosim.Occupancy.SimpleOccupancyoccupancy_0;Buildings.Fluid.Movers.Preconfigured.SpeedControlled_ypump(redeclarepackageMedium=MediumW,m_flow_nominal=mRad_flow_nominal,dp_nominal=dp_nominal,energyDynamics=Modelica.Fluid.Types.Dynamics.SteadyState);Neosim.Fluid.Boilers.Simpleboiler(redeclarepackageMedium=MediumW)"Boiler";Buildings.Fluid.FixedResistances.Junctionsplit_valve(dp_nominal={0,0,0},m_flow_nominal=mRad_flow_nominal*{1,-1,-1},redeclarepackageMedium=MediumW,energyDynamics=Modelica.Fluid.Types.Dynamics.SteadyState)"Flowsplitter";Buildings.Fluid.Actuators.Valves.ThreeWayEqualPercentageLinearthree_way_valve(redeclarepackageMedium=MediumW,dpValve_nominal=dpThrWayVal_nominal,l={0.01,0.01},tau=10,m_flow_nominal=mRad_flow_nominal,dpFixed_nominal={100,0},use_inputFilter=false,energyDynamics=Modelica.Fluid.Types.Dynamics.SteadyState)"Three-wayvalve";Modelica.Blocks.Sources.Constantpump_control(k=1);Modelica.Blocks.Sources.Constantthree_way_valve_control(k=1);equationconnect(space_1.heaPorAir,emission.heatPortCon);connect(space_1.heaPorRad,emission.heatPortRad);connect(space_1.qGai_flow,occupancy_0.y);connect(space_1.weaBus,weather.weaBus);connect(emission.port_b,split_valve.port_1);connect(valve.port_b,emission.port_a);connect(space_control.port,space_1.heaPorAir);connect(space_control.y,valve.y);connect(pump.port_b,three_way_valve.port_1);connect(pump.y,pump_control.y);connect(boiler.port_b,pump.port_a);connect(split_valve.port_2,boiler.port_a);connect(three_way_valve.port_2,valve.port_a);connect(three_way_valve.port_3,split_valve.port_3);connect(three_way_valve.y,three_way_valve_control.y);endbuildings_simple_hydronic;
